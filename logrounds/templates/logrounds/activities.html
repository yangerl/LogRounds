
{% load staticfiles %}
<link rel="stylesheet" type="text/css" href="{% static 'logrounds/activities.css' %}" />
<!-- ########################################################################## -->
<!-- ########################################################################## -->
<!-- ########################################################################## -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<script src="{% static 'logrounds/clock.js' %}"></script>


<div id="header">
<h1 style= "font-size:48px">
	{{round.rt_name}}
	<br/>
	Server Time: <span id='universal'></span>	
</h1>
<a href="{% url 'logrounds:detail' round.id %}" style="text-decoration:none">
<button id='back' type="button"> Back </button>
</a>
<br/><br/>
</div>
<br/><br/>

{% load app_filters %}

{% for key,value in pd_lgdf.items  %}
{% with curr_logset=curr_lgst_dict|lookup:key %}
{% with myduedate=curr_logset.start_time|due:curr_logset.next_time %}
<div class='container'>

<h1>Period Name: {{key}}</h1>
<table style='width:100%';>
	<!-- keys are the period, values is the list of logdefs -->
	
	<caption>
		<div class='halfsize'>
			
			<span>
				Due Date: {{myduedate}}<br/>
				<span>
					{{ curr_logset.start_time }} to {{ curr_logset.next_time }}<br/>
				</span>
			<span>
		</div>
	</caption>

	<tr style="font-weight:bold">
		<th>Attribute Name</th>
		<th>Completed</th>
		<th>View Entry</th>
		<th>Create Entry</th>
		<th>Update Entry</th>
	</tr>
	{% for logdef in value %}
	<tr>
		{% with k=logdef|key %}
			{% with logentry=logdef|lookup:k %}
			<td> {{k}} </td>
			{% if logentry != None %}
				<td> 
					{% with thislogtime=logentry|logtime %}
						{{ thislogtime }}
						
						{% if thislogtime > myduedate %}
							(Late)
						{% endif %}
					
					{% endwith %}
				</td>
				<td>
					<a href="{% url 'logrounds:entry_details' round.id k.id curr_logset.id logentry.id %}" style="text-decoration:none"> 
					<button> View </button> 
					</a>
				</td>
				<td> Entry Already Created </td>
				<td> <a href="{% url 'logrounds:entry_update' round.id k.id curr_logset.id logentry.id %}" style="text-decoration:none">
				<button> Update </button> </a>
				 </td>

			{% else %}
				
				{% if time > myduedate %}
					<td> Incomplete (Late) </td>
				{% else %}
					<td> Incomplete </td>
				{% endif %}
				<td> No Entry to View </td>
				<td> 
				<a href="{% url 'logrounds:create_entry' round.id k.id curr_logset.id %}?next={{round.id}}">
				<button> Create Now </button> </a>
				</td>
				<td> No Entry to Update </td>

			{% endif %}
			{% endwith %}
		{% endwith %}
	</tr>

	{% endfor %}
</table>
{% endwith %}
{% endwith %}
{% endfor %}
<div>